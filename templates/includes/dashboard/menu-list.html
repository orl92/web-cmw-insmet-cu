{% load my_filters %}
<ul class="navbar-nav pt-lg-3">
  <!-- Dashboard -->
  {% if request.user.is_staff %}
  <li class="nav-item {% if 'dashboard' in segment %}active{% endif %}">
      <a class="nav-link" href="{% url 'dashboard' %}">
        <span class="nav-link-icon d-md-none d-lg-inline-block">
          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24"
            stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M5 12l-2 0l9 -9l9 9l-2 0" />
            <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
            <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
          </svg>
        </span>
        <span class="nav-link-title">
          Dashboard
        </span>
      </a>
  </li>
  {% endif %}
  <!-- Autenticación -->
  <li class="nav-item dropdown {% if 'accounts' in parent %}active{% endif %}">
    <a class="nav-link dropdown-toggle" href="#navbar-base" data-bs-toggle="dropdown" data-bs-auto-close="false"
      role="button" aria-expanded="false">
      <span
        class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-lock"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z" /><path d="M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0" /><path d="M8 11v-4a4 4 0 1 1 8 0v4" /></svg>
      </span>
      <span class="nav-link-title">
        Autenticación
      </span>
    </a>
    <div class="dropdown-menu {% if 'accounts' in parent %}show{% endif %}">
      <div class="dropdown-menu-columns">
        {% if request.user.is_superuser %}
        <div class="dropdown-menu-column">
          <a class="dropdown-item {% if 'groups' in segment %}active{% endif %}" href="{% url 'groups' %}">
            Grupos
          </a>
          <a class="dropdown-item {% if 'users' in segment %}active{% endif %}" href="{% url 'users' %}">
            Usuarios
          </a>
          {% endif %}
          <a class="dropdown-item {% if 'profile' in segment %}active{% endif %}" href="{% url 'profile' %}">
            Perfil
          </a>
          <a class="dropdown-item {% if 'password_change' in segment %}active{% endif %}" href="{% url 'password_change' %}">
            Cambiar Contraseña
          </a>
      </div>
    </div>
  </li>
  <!-- Provincias -->
  {% if request.user|has_permission:'dashboard.view_province' %}
  <li class="nav-item {% if 'provincia' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'provincias' %}">
      <span class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-map-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 18.5l-3 -1.5l-6 3v-13l6 -3l6 3l6 -3v7.5" /><path d="M9 4v13" /><path d="M15 7v5.5" /><path d="M21.121 20.121a3 3 0 1 0 -4.242 0c.418 .419 1.125 1.045 2.121 1.879c1.051 -.89 1.759 -1.516 2.121 -1.879z" /><path d="M19 18v.01" /></svg>
      </span>
      <span class="nav-link-title">Provincias</span>
    </a>
  </li>
  {% endif %}
  <!-- Estaciones -->
  {% if request.user|has_permission:'dashboard.view_station' %}
  <li class="nav-item {% if 'estacion' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'estaciones' %}">
      <span class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-building-broadcast-tower"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M16.616 13.924a5 5 0 1 0 -9.23 0" /><path d="M20.307 15.469a9 9 0 1 0 -16.615 0" /><path d="M9 21l3 -9l3 9" /><path d="M10 19h4" /></svg>
      </span>
      <span class="nav-link-title">Estaciones</span>
    </a>
  </li>
  {% endif %}
  <!-- Pronósticos -->
  {% if request.user|has_permission:'dashboard.view_forecast' %}
  <li class="nav-item {% if 'pronostico' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'pronosticos' %}">
        <span class="nav-link-icon d-md-none d-lg-inline-block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-sun-moon"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9.173 14.83a4 4 0 1 1 5.657 -5.657" /><path d="M11.294 12.707l.174 .247a7.5 7.5 0 0 0 8.845 2.492a9 9 0 0 1 -14.671 2.914" /><path d="M3 12h1" /><path d="M12 3v1" /><path d="M5.6 5.6l.7 .7" /><path d="M3 21l18 -18" /></svg>
        </span>
        <span class="nav-link-title">Pronósticos</span>
    </a>
  </li>
  {% endif %}
  <!-- Tiempo -->
  {% if request.user|has_permission:'dashboard.view_forecast' %}
  <li class="nav-item dropdown {% if 'tiempo' in parent %}active{% endif %}">
    <a class="nav-link dropdown-toggle" href="#navbar-base" data-bs-toggle="dropdown" data-bs-auto-close="false"
      role="button" aria-expanded="false">
      <span
        class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-temperature-sun"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 13.5a4 4 0 1 0 4 0v-8.5a2 2 0 1 0 -4 0v8.5" /><path d="M4 9h4" /><path d="M13 16a4 4 0 1 0 0 -8a4.07 4.07 0 0 0 -1 .124" /><path d="M13 3v1" /><path d="M21 12h1" /><path d="M13 20v1" /><path d="M19.4 5.6l-.7 .7" /><path d="M18.7 17.7l.7 .7" /></svg>
      </span>
      <span class="nav-link-title">
        Tiempo
      </span>
    </a>
    <div class="dropdown-menu {% if 'tiempo' in parent %}show{% endif %}">
      <div class="dropdown-menu-columns">
        <div class="dropdown-menu-column">
          <a class="dropdown-item {% if 'tiempo_h' in segment %}active{% endif %}" href="{% url 'listado_tiempo_h' %}">
            Hoy
          </a>
          <a class="dropdown-item {% if 'tiempo_m' in segment %}active{% endif %}" href="{% url 'listado_tiempo_m' %}">
            Mañana
          </a>
      </div>
    </div>
  </li>
  {% endif %}
  <!-- Comentarios -->
  {% if request.user|has_permission:'dashboard.view_forecast' %}
  <li class="nav-item dropdown {% if 'comentario' in parent %}active{% endif %}">
    <a class="nav-link dropdown-toggle" href="#navbar-base" data-bs-toggle="dropdown" data-bs-auto-close="false"
      role="button" aria-expanded="false">
      <span
        class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-notebook"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h11a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-11a1 1 0 0 1 -1 -1v-14a1 1 0 0 1 1 -1m3 0v18" /><path d="M13 8l2 0" /><path d="M13 12l2 0" /></svg>
      </span>
      <span class="nav-link-title">
        Comentarios
      </span>
    </a>
    <div class="dropdown-menu {% if 'comentario' in parent %}show{% endif %}">
      <div class="dropdown-menu-columns">
        <div class="dropdown-menu-column">
          <a class="dropdown-item {% if 'comentario_tiempo' in segment %}active{% endif %}" href="{% url 'listado_comentarios_tiempo' %}">
            Tiempo
          </a>
          <a class="dropdown-item {% if 'nota_meteorologica' in segment %}active{% endif %}" href="{% url 'listado_notas_meteorologicas' %}">
            Nota meteorológica
          </a>
      </div>
    </div>
  </li>
  {% endif %}
  <!-- Avisos -->
  {% if request.user|has_permission:'dashboard.view_early_warning' or request.user|has_permission:'dashboard.view_tropical_cyclone' or request.user|has_permission:'dashboard.view_special_notice' or request.user|has_permission:'dashboard.view_radar_warning' %}
  <li class="nav-item dropdown {% if 'aviso' in parent %}active{% endif %}">
    <a class="nav-link dropdown-toggle" href="#navbar-base" data-bs-toggle="dropdown" data-bs-auto-close="false"
      role="button" aria-expanded="false">
      <span
        class="nav-link-icon d-md-none d-lg-inline-block">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-info-square-rounded"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 9h.01"/><path d="M11 12h1v4h1"/><path d="M12 3c7.2 0 9 1.8 9 9s-1.8 9 -9 9s-9 -1.8 -9 -9s1.8 -9 9 -9z"/></svg>
      </span>
      <span class="nav-link-title">
        Avisos
      </span>
    </a>
    <div class="dropdown-menu {% if 'avisos' in parent %}show{% endif %}">
      <div class="dropdown-menu-columns">
        <div class="dropdown-menu-column">
          {% if request.user|has_permission:'dashboard.view_early_warning' %}
          <a class="dropdown-item {% if 'early' in segment %}active{% endif %}" href="{% url 'alertas_tempranas' %}">
            Alertas Tempranas
          </a>
          {% endif %}
          {% if request.user|has_permission:'dashboard.view_tropical_cyclone' %}
          <a class="dropdown-item {% if 'cyclone' in segment %}active{% endif %}" href="{% url 'ciclones_tropicales' %}">
            Ciclones Tropicales
          </a>
          {% endif %}
          {% if request.user|has_permission:'dashboard.view_special_notice' %}
          <a class="dropdown-item {% if 'special' in segment %}active{% endif %}" href="{% url 'avisos_especiales' %}">
            Especiales
          </a>
          {% endif %}
          {% if request.user|has_permission:'dashboard.view_radar_warning' %}
          <a class="dropdown-item {% if 'radar' in segment %}active{% endif %}" href="{% url 'avisos_radares' %}">
            Radares
          </a>
          {% endif %}
      </div>
    </div>
  </li>
  {% endif %}
  <!-- Customer -->
  {% if request.user|has_permission:'dashboard.view_customer' %}
  <li class="nav-item {% if 'clientes' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'listado_clientes' %}">
      <span class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-users"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" /><path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /><path d="M21 21v-2a4 4 0 0 0 -3 -3.85" /></svg>
      </span>
      <span class="nav-link-title">Clientes</span>
    </a>
  </li>
  {% endif %}
  <!-- Servicios -->
  {% if request.user|has_permission:'dashboard.view_service' %}
  <li class="nav-item {% if 'servicios' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'listado_servicios' %}">
      <span class="nav-link-icon d-md-none d-lg-inline-block">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-server"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 4m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"/><path d="M3 12m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v2a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"/><path d="M7 8l0 .01"/><path d="M7 16l0 .01"/></svg>
      </span>
      <span class="nav-link-title">Servicios</span>
    </a>
  </li>
  {% endif %}
  <!-- Listados de Correos -->
  {% if request.user|has_permission:'dashboard.view_email_recipient_list' %}
  <li class="nav-item {% if 'email' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'listado_correos' %}">
      <span class="nav-link-icon d-md-none d-lg-inline-block">
        <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z" /><path d="M3 7l9 6l9 -6" /></svg>
      </span>
      <span class="nav-link-title">Listados de Correos</span>
    </a>
  </li>
  {% endif %}
  <!-- Modo Mantenimiento -->
  {% if request.user.is_superuser %}
  <li class="nav-item {% if 'maintenance' in segment %}active{% endif %}">
    <a class="nav-link" href="{% url 'toggle_maintenance_mode' %}">
      <span class="nav-link-icon d-md-none d-lg-inline-block">
          <svg  xmlns="http://www.w3.org/2000/svg"  width="24"  height="24"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>
      </span>
      <span class="nav-link-title">Mantenimiento</span>
    </a>
  </li>
  {% endif %}

</ul>